<%= form_for(@comment, :as => "comment",:url => post_comments_path(@post), :remote => true, :validate => (current_user ? true : false)) do |f| %>
	
	<h1>New comment</h1>

	<% if @comment.errors.any? %>
		<div id="error_explanation">
			<h2><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being saved:</h2>
  
			<ul>
			<% @comment.errors.full_messages.each do |msg| %>
				<li><%= msg %></li>
			<% end %>
			</ul>
		</div>
	<% end %>

	<%= Devise.mappings.keys %>

	<div class="field">
	  <%= f.label :title %><br />
	  <%= f.text_field :title, 'data-post-id' => @post.id %>
	</div>
	
	<div class="field">
    	<%= f.label :body %><br />
    	<%= f.text_area :body, :validate => true %>
	</div>
	
	<div class="field">
    	<%= f.check_box :send_notification_to_root_comment, :validate => true %><%= f.label "M'envoyer une notification lorsque quelqu'un répond à mon commentaire" %>
	</div>

	<div class="actions">
	<% if current_user %>
		<%= f.submit %>
	<% else %>
		<div class="wrap_drop_write_as">
		<%= render 'comments/drop_write_as' %>
		</div>
	<% end %>
	</div>
<% end %>
